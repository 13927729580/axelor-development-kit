<div class="form-view" ng-controller="FormViewCtrl" ui-tab-gate>
  <div class="navbar record-toolbar" ng-show="canShowToolbar()">
    <div class="navbar-inner">
      <div class="container">
        <div class="btn-group">
          <button class="btn" ng-click="onNew()" ng-if="canNew()" title="{{ 'New' | t}}">
            <i class="icon icon-file"></i> <span ng-hide="tbTitleHide" x-translate>New</span>
          </button>
          <button class="btn" ng-click="onEdit()" ng-if="!isEditable() && canEdit()" title="{{ 'Edit' | t}}">
            <i class="icon icon-pencil"></i> <span ng-hide="tbTitleHide" x-translate>Edit</span>
          </button>
          <button class="btn" ng-click="onSave()" ng-if="isEditable() && (canEdit() || canSave())"  title="{{ 'Save' | t}}">
            <i class="icon icon-save"></i> <span ng-hide="tbTitleHide" x-translate>Save</span>
          </button>
          <button class="btn" ng-click="onCancel()" ng-if="hasButton('cancel') && !canEdit()" ng-disabled="!canCancel()" title="{{ 'Cancel' | t}}">
            <i class="icon icon-ban-circle"></i> <span ng-hide="tbTitleHide" x-translate>Cancel</span>
          </button>
          <button class="btn" ng-click="onBack()" ng-if="hasButton('back')" ng-disabled="!canBack()" title="{{ 'Back' | t}}">
            <i class="icon icon-reply"></i> <span ng-hide="tbTitleHide" x-translate>Back</span>
          </button>
          <button class="btn" ng-disabled="!canShowAttachments()" ng-click="onShowAttachments()" ng-class="{'has-attachments': record.$attachments}">
          	<i class="icon icon-pushpin"></i><sub ng-if="record.$attachments"> {{record.$attachments}}</sub>
          </button>
        </div>
        <div class="btn-group" ng-if="toolbar" ui-btn-group-helper>
          <button ng-repeat="btn in toolbar | filter:{custom: true}" ui-tool-button></button>
        </div>
        <div class="btn-group" ng-if="toolbar" ui-btn-group-helper style="display: none;">
          <button ng-repeat="btn in toolbar | filter:{custom: false}" ui-tool-button></button>
        </div>
        <div ui-menu-bar menus="toolmenu" handler="this"></div>
        <div ui-menu-bar menus="menubar" handler="this"></div>
        <div ui-view-switcher class="pull-right"></div>
        <div ui-record-pager class="pull-right"></div>
      </div>
    </div>
  </div>
  <div ui-view-form x-handler="this" ng-class="{'no-toolbar': !canShowToolbar() }"></div>
</div>